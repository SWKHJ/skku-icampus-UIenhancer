/* =========================================
   공통
   ========================================= */
:root { color-scheme: light dark; }

/* 폭 계산 안정화 (클리핑 방지) */
html { box-sizing: border-box; }
*, *::before, *::after { box-sizing: inherit; }

html, body {
  margin: 0;
  padding: 0;
  width: 360px;          /* 팝업 고정 폭 */
  height: 720px;         /* 세로 길이 확장 */
}

body {
  font: 13px/1.4 system-ui, -apple-system, Segoe UI, Roboto, 'Noto Sans KR', sans-serif;
  overflow-y: auto;      /* 세로 스크롤 허용 */
  overflow-x: hidden;    /* 가로 스크롤 차단 */
}

/* 다크 모드 대비 */
@media (prefers-color-scheme: dark) {
  body { background: #111; color: #eaeaea; }

  .hdr { border-bottom-color: #ffffff22; }
  .controls { border-bottom-color: #ffffff1f; }

  .card { background: #111; border-color: #ffffff22; }
  .task-row { border-color: #ffffff22; }
  .task-row:hover { background: #ffffff10; }

  .task-title { color: #f3f4f6; }
  .task-detail { color: #cfd8e3; opacity: .9; }
  .task-row.child .task-detail { color: #cfd8e3; }
  .mini-agg .label { color: #dbe1ea; opacity: .9; }

  #pane-timer .stats { border-top-color: #ffffff33; }
  .today-items { border-top-color: #ffffff33; }

  #pane-timer .task input {
    background: #0e0e0e; color: #f3f4f6;
    border-color: #ffffff33;
  }

  .tab-btn { border-color: #ffffff22; }
  .tab-btn.active { background: #ffffff10; }

  .btn-start { border-color: #2a6fd1; }
  .btn-pause { border-color: #c7a450; }
  .btn-stop  { border-color: #c13a59; }
}

/* 헤더 */
.hdr {
  display:flex; justify-content:space-between; align-items:center;
  padding:8px 10px; border-bottom:1px solid #00000022;
}
.title  { font-weight:700; }
.points { font-weight:600; }

/* =========================================
   탭 공통
   ========================================= */
.tabs { display:flex; gap:8px; margin:6px 10px 10px; }
.tab-btn {
  padding:6px 10px; border-radius:8px; cursor:pointer;
  border:1px solid #00000022; background:#0000;
}
.tab-btn.active { background:#00000010; }

.pane { display:block; }
.pane[hidden] { display:none; }
.pane.is-active { display:block; }

/* =========================================
   SHOP
   ========================================= */
.controls {
  display:grid; grid-template-columns:1fr 1fr 1fr; gap:8px;
  padding:8px 10px; border-bottom:1px solid #00000012;
}
.controls button { padding:6px 8px; border-radius:8px; cursor:pointer; }
.controls .danger { border:1px solid #cc3344; }

.grid {
  display:grid; grid-template-columns:1fr 1fr; gap:8px;
  padding:8px 10px;
}

.card {
  border:1px solid #00000022; border-radius:10px; overflow:hidden; background:#fff0;
}
.card .imgwrap {
  width:100%; aspect-ratio: 1 / 1;
  display:flex; align-items:center; justify-content:center;
  background:#00000008;
}
.card img { width:88%; height:88%; object-fit:contain; }
.card .meta { padding:6px; display:grid; gap:6px; }
.row { display:flex; justify-content:space-between; align-items:center; gap:6px; }
.price { font-weight:700; }
.card button { padding:6px 10px; border-radius:8px; cursor:pointer; }
.owned { opacity:0.95; }

/* =========================================
   TIMER 탭
   ========================================= */
#pane-timer .task { margin:8px 10px; display:grid; gap:6px; }
#pane-timer .task input {
  width:100%; padding:8px; border-radius:8px; border:1px solid #8883;
}

/* 입력 필드 폭 중앙 정렬 */
#pane-timer .task { display:grid; justify-content:center; }
#pane-timer .task input[type="text"] {
  width: min(92vw, 300px);
  box-sizing: border-box;
}
.mini-agg { display:flex; gap:.5rem; align-items:center; padding:.25rem .5rem; opacity:.9; }
.mini-agg .label { font-weight:600; opacity:.8; }
.mini-agg { max-width:300px; margin:0 auto .25rem; }

#pane-timer .timer { text-align:center; margin:10px 0; }
#pane-timer #display {
  font-size:48px; font-weight:800; font-variant-numeric:tabular-nums;
}
#pane-timer .timer .controls {
  display:flex; gap:8px; justify-content:center; margin-top:8px;
}

/* 버튼 상태/색상 */
#pane-timer .timer .controls button {
  padding:8px 10px; border-radius:10px; border:1px solid transparent; cursor:pointer;
}
button[disabled]{
  opacity:.45; cursor:not-allowed; filter:saturate(.3); box-shadow:none;
}
.btn-start { background:#3a86ff; color:#fff; border-color:#2a6fd1; }
.btn-pause { background:#ffd166; color:#222; border-color:#c7a450; }
.btn-stop  { background:#ef476f; color:#fff; border-color:#c13a59; }

#pane-timer #modeHint { display:block; margin-top:6px; opacity:.8; }

/* 오늘/주 합계 */
#pane-timer .stats {
  margin:12px 10px 0; border-top:1px dashed #8884; padding-top:10px;
}
#pane-timer .stats .row {
  display:grid; grid-template-columns:1fr auto auto; gap:8px; margin:4px 0;
}

/* 오늘 리스트(Accordion) */
.today-items { padding:8px 10px; border-top:1px dashed #00000033; }
.list-hdr{ font-weight:700; margin-bottom:6px; opacity:.9; }

.task-row{
  display:flex; justify-content:space-between; align-items:center;
  gap:10px; padding:8px; border:1px solid #00000022; border-radius:8px; margin-bottom:6px; cursor:pointer;
}
.task-row:hover{ background:#00000008; }
.task-row.empty{ opacity:.6; cursor:default; }

.task-left{ min-width:0; }
.task-title{ font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.task-detail{ font-size:12px; opacity:.8; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.task-time{ font-variant-numeric: tabular-nums; font-weight:700; }

/* Accordion */
.task-row.parent { font-weight:600; padding-top:8px; cursor:pointer; }
.task-row.child  { padding-left:16px; opacity:.95; }
.task-row.child .task-detail { color:#cfcfcf; }
.children.hidden { display:none; }

/* ===== Settings Pane ===== */
#pane-settings .settings { padding:10px 12px; display:grid; gap:14px; } /* 우측 패딩 ↑ */
.set-hdr { margin:2px 0 4px; font-weight:700; }

/* (Settings 한정) 카드 프레임 */
#pane-settings .card {
  border:1px solid #00000022;
  border-radius:10px;
  padding:10px;
  background:#0000;
}

/* Export 타입 라디오 */
.export-type { display:grid; gap:8px; }
.radio, .radio-line {
  display:grid;
  grid-template-columns:auto minmax(0,1fr); /* 텍스트 수축 허용 */
  gap:10px;
  align-items:start;
  padding:8px;
  border:1px solid #00000011;
  border-radius:8px;
  cursor:pointer;
}
.radio input, .radio-line input { margin-top:2px; }
.radio-title { font-weight:700; }
.radio-desc { font-size:12px; opacity:.9; word-break:break-word; overflow-wrap:anywhere; }
.radio .dim { opacity:.7; }

/* === Export: 기간 + 버튼 (세로 스택 레이아웃) === */
.export-row{
  display: grid;
  grid-template-columns: 1fr;  /* 한 줄에 하나씩 */
  row-gap: 10px;               /* 요소 간 간격 */
  align-items: start;
  padding: 6px 0 8px;
}

.export-row .col{
  display: grid;
  gap: 6px;                    /* 라벨 ↔ 인풋 간격 */
}

.export-row .lbl{
  font-size: 12px;
  opacity: .85;
}

/* 날짜 인풋: 폭·높이 통일 */
.export-row input[type="date"]{
  width: 100%;
  padding: 10px;
  height: 38px;
  border-radius: 8px;
  border: 1px solid #8883;
  box-sizing: border-box;
}

/* 버튼은 맨 아래 한 줄 전체 차지 */
.btncol{
  display: block;
}

.btn{
  display: inline-block;
  width: 100%;
  padding: 10px 14px;
  border-radius: 9px;
  border: 1px solid transparent;
  cursor: pointer;
  font-weight: 600;
  white-space: nowrap;
  text-align: center;
  box-sizing: border-box;
}

.btn.primary { background: #3a86ff; color:#fff; border-color:#2a6fd1; }
.btn.danger  { background: #ef476f; color:#fff; border-color:#c13a59; }
.btn.outline { background: transparent; color: inherit; border-color:#00000033; }
.btn:disabled{ opacity:.45; cursor:not-allowed; }

/* 삭제 섹션 입력(일 수) 스타일도 통일 */
.delete-inputs input[type="number"]{
  width: 100%;
  padding: 10px;
  height: 38px;
  border-radius: 8px;
  border: 1px solid #8883;
  box-sizing: border-box;
}

/* 삭제 버튼은 빨강 아웃라인로 더 또렷하게 */
.btn.danger-outline{
  background: transparent;
  color: #ef476f;
  border-color: #ef476f80;
  transition: all .12s ease;
}
.btn.danger-outline:hover,
.btn.danger-outline:focus{
  background: #ef476f;
  color: #fff;
  border-color: #c13a59;
}
